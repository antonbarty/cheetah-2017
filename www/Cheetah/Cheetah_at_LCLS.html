<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="Generator" content="iWeb 3.0.4" />
    <meta name="iWeb-Build" content="local-build-20150402" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta name="viewport" content="width=700" />
    <title>Cheetah at LCLS</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="Cheetah_at_LCLS_files/Cheetah_at_LCLS.css" />
    <!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='Cheetah_at_LCLS_files/Cheetah_at_LCLSIE.css'/><![endif]-->
    <!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='Media/IE8.css'/><![endif]-->
    <script type="text/javascript" src="Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="Cheetah_at_LCLS_files/Cheetah_at_LCLS.js"></script>
  </head>
  <body style="background: rgb(101, 101, 101); margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 10px; margin-left: auto; margin-right: auto; margin-top: 10px; overflow: hidden; position: relative; word-wrap: break-word;  background: rgb(255, 255, 255); text-align: left; width: 700px; " id="body_content">
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 0; " id="nav_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 20px; margin-top: 0px; opacity: 1.00; position: relative; width: 660px; z-index: 1; ">
    
            <div id="widget0-navbar" class="navbar">

      
              <div id="widget0-bg" class="navbar-bg">

        
                <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                
      
</div>
              
    
</div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', 'Scripts/Widgets/Navbar', 'Scripts/Widgets/SharedResources', '.', {"path-to-root": "", "navbar-css": ".navbar {\n\tfont-family: 'Helvetica Neue', Arial, sans-serif;\n\tfont-size: .8em;\n\tcolor: #666666;\n\tline-height: 30px;\n\tborder-bottom: 3px solid #ccc;\n}\n\n.navbar-bg {\n\ttext-align: right;}\n\n.navbar-bg ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n\nli {\n\tlist-style-type: none;\n\tdisplay: inline;\n\tpadding: 0px 5px 0px 0px;\n}\n\n\nli a {\n\ttext-decoration: none;\n\tpadding: 10px;\n\tcolor: #666666;\n\tfont-weight: bold;\n}\n\nli a:visited {\n\ttext-decoration: none;\n\tpadding: 10px;\n\tcolor: #666666;\n\tfont-weight: bold;\n}\n\nli a:hover\r{\r\n \tcolor: #999999;\n\ttext-decoration: none;\r}\n\n\nli.current-page a\r{\r\t color: #66ABC5;\n\ttext-decoration: none;\r}\n", "current-page-GUID": "85346840-8022-4F01-AA6C-560E554A4B68", "isCollectionPage": "NO"});
//--><!]]></script>
          <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="height: 1017px; margin-left: 0px; position: relative; width: 700px; z-index: 10; " id="header_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id2" style="height: 43px; left: 20px; position: absolute; top: 974px; width: 515px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content Normal_External_515_43" style="padding: 0px; ">
              <div class="Normal">
                <div class="paragraph Header" style="padding-bottom: 0pt; padding-top: 0pt; "><div id="id1" style="height: 43px; position: relative; width: 515px; " class="style_SkipStroke shape-with-text inline-block"><div class="text-content Normal_External_515_43" style="padding: 0px; "><div class="Normal"><p style="padding-bottom: 0pt; padding-top: 0pt; " class="Header">Setup</p></div></div></div></div>
              </div>
              <div style="clear: both; height: 0px; line-height: 0px; " class="tinyText"> </div>
            </div>
          </div>
          


          <div id="id3" style="height: 120px; left: 19px; position: absolute; top: 377px; width: 662px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_662_120" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">Cheetah is installed on the LCLS servers.  This means it should be possible to get started without having to download or  compile anything.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">First complete the experiment setup instructions below (if not already done).<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">Then, to use the centrally installed version of Cheetah execute the setup script <br /></p>
                <p class="Free_Form">    &gt; source /reg/g/cfel/cheetah/setup.csh <br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">from your C shell (bash version also available)</p>
              </div>
            </div>
          </div>
          


          <div id="id4" style="height: 92px; left: 19px; position: absolute; top: 517px; width: 662px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_662_92" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="paragraph_style"><br /></p>
                <p class="paragraph_style">[psanacs055:barty]~&gt; source /reg/g/cfel/cheetah/setup.csh<br /></p>
                <p class="paragraph_style">Setting up Cheetah<br /></p>
                <p class="paragraph_style">Using /reg/g/cfel/cheetah/cheetah-latest<br /></p>
                <p class="paragraph_style">[psanacs055:barty]~&gt; <br /></p>
                <div style="padding-bottom: 0pt; " class="paragraph_style"><br /></div>
              </div>
            </div>
          </div>
          


          <div id="id5" style="height: 41px; left: 19px; position: absolute; top: 618px; width: 662px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_662_41" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">Once executed, the Cheetah GUI can be started using the command <br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">&gt; cheetah-gui</p>
              </div>
            </div>
          </div>
          


          <div id="id6" style="height: 67px; left: 19px; position: absolute; top: 674px; width: 662px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_662_67" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="paragraph_style"><br /></p>
                <p class="paragraph_style">[psanacs055:barty]~&gt; cheetah-gui<br /></p>
                <p class="paragraph_style">IDL Version 8.0 (linux x86_64 m64). (c) 2010, ITT Visual Information Solutions<br /></p>
              </div>
            </div>
          </div>
          


          <div id="id7" style="height: 191px; left: 19px; position: absolute; top: 756px; width: 662px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_662_191" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">This starts the Cheetah GUI interface (which runs using the IDL virtual machine in runtime mode).<br /></p>
                <p class="Free_Form">Instructions on how to set up Cheetah for your experiment are contained below.  Make sure you (or someone else) has first followed these instructions or some random error will occur.  <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">Any machine with access to your data in /reg/d/psdm/{experiment} can be used to browse data.<br /></p>
                <p class="Free_Form">It is necessary to have access to <span class="style">both</span> the data directories <span class="style">and</span> the ‘bsub’ batch queue commands in order to run cheetah and submit batch jobs. <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">It is best to run from one of the psana nodes (as these have faster data access).  <br /></p>
                <p class="Free_Form">Running on psexport also works (all calculations are sent to the batch queue, so this should not overload the one server, but file access can be a bit slower). <br /></p>
                <p class="Free_Form"><br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">Central installation files are located in the directory /reg/g/cfel/cheetah </p>
              </div>
            </div>
          </div>
          


          <div id="id9" style="height: 43px; left: 20px; position: absolute; top: 44px; width: 515px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content Normal_External_515_43" style="padding: 0px; ">
              <div class="Normal">
                <div class="paragraph Header" style="padding-bottom: 0pt; padding-top: 0pt; "><div id="id8" style="height: 43px; position: relative; width: 515px; " class="style_SkipStroke shape-with-text inline-block"><div class="text-content Normal_External_515_43" style="padding: 0px; "><div class="Normal"><p style="padding-bottom: 0pt; padding-top: 0pt; " class="Header">Pre-installed Cheetah at LCLS</p></div></div></div></div>
              </div>
              <div style="clear: both; height: 0px; line-height: 0px; " class="tinyText"> </div>
            </div>
          </div>
          


          <div style="height: 216px; width: 564px;  height: 216px; left: 68px; position: absolute; top: 120px; width: 564px; z-index: 1; " class="tinyText style_SkipStroke_2">
            <img src="Cheetah_at_LCLS_files/droppedImage.jpg" alt="" style="border: none; height: 217px; width: 564px; " />
          </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 5; " id="body_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id10" style="height: 246px; left: 18px; position: absolute; top: 14px; width: 664px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_664_246" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">Cheetah does not magically know the details about your experiment - it is necessary to tell Cheetah about the location and format of data files, detector calibration, and what analysis to perform.  <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">Most of this mess has been hidden behind a few configuration scripts which you will need to edit in order to provide the necessary information. This page will guide you through the key steps in setting up these scripts from scratch for a new experiment.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">First, know the location of your data and where temporary files can be written.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">At CXI, all data for your experiment will usually be in a location such as<br /></p>
                <p class="Free_Form">    /reg/d/psdm/cxi/cxi12345<br /></p>
                <p class="Free_Form">In this directory will be subdirectories with the raw data (xtc/), somewhere to write temporary files (scratch/), and a few other directories that don’t matter for now. <br /></p>
                <p class="Free_Form">    [psexport02] cxi12345 &gt; ls<br /></p>
                <p class="Free_Form">    calib  ftc  hdf5  res  scratch  usr  xtc<br /></p>
              </div>
            </div>
          </div>
          


          <div id="id11" style="height: 20px; left: 20px; position: absolute; top: 368px; width: 515px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style_1">1. Download the template</p>
              </div>
            </div>
          </div>
          


          <div id="id12" style="height: 120px; left: 16px; position: absolute; top: 388px; width: 660px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_660_120" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">Expand the file /reg/g/cfel/cheetah/template.tar into the location where you want files to be placed:<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">&gt; tar -xvf /reg/g/cfel/cheetah/template.tar<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">This will create the cheetah directory with a number of sub-directories containing a ‘starter kit’ of files:<br /></p>
                <p class="Free_Form">&gt; ls cheetah<br /></p>
                <p class="Free_Form">calib  gui  hdf5  process<br /></p>
              </div>
            </div>
          </div>
          


          <div id="id13" style="height: 20px; left: 20px; position: absolute; top: 537px; width: 515px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style_1">2. edit gui/crawler.config</p>
              </div>
            </div>
          </div>
          


          <div id="id14" style="height: 54px; left: 16px; position: absolute; top: 558px; width: 660px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_660_54" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">Edit the file cheetah/gui/crawler.config<br /></p>
              </div>
            </div>
          </div>
          


          <div id="id15" style="height: 64px; left: 16px; position: absolute; top: 808px; width: 660px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_660_64" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">xtcdir should point to the location of your XTC files<br /></p>
                <p class="Free_Form">hdf5dir should point to where you want the Cheetah output to go.  By default let this be the cheetah/hdf5 directory expanded by the template (but it can be elsewhere).<br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">The rest can be left alone for now.</p>
              </div>
            </div>
          </div>
          


          <div id="id16" style="height: 20px; left: 20px; position: absolute; top: 921px; width: 515px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style_1">3. edit process/process</p>
              </div>
            </div>
          </div>
          


          <div id="id17" style="height: 92px; left: 16px; position: absolute; top: 946px; width: 660px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_660_92" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">Edit the file cheetah/process/process<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">This script is a front-end to making Cheetah run, enabling data to be processed from the command line by simply typing the one-line command<br /></p>
                <p class="Free_Form">    &gt; ./process &lt;Run#&gt; &lt;cheetah.ini&gt; &lt;tag&gt;<br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">This is the command executed by the ‘Run Cheetah’ button on the front of the GUI. </p>
              </div>
            </div>
          </div>
          


          <div id="id18" style="height: 134px; left: 16px; position: absolute; top: 1416px; width: 660px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_660_134" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">It should only be necessary to edit the experiment name. The rest should should not need modification, but should be self-explanatory if changes need to be made (for example configuration files in ${expt}/res instead of ${expt}/scratch).<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">The last three lines are various options for calling the hitfinder script using either (i) the SLAC batch queue, (ii) the SLAC batch queue with a separate job for each XTC stream, or (iii) output to the terminal.  Probably no need to change these (ii adds some speed at the expense of complexity, while option iii is useful for debugging if things go really wrong)<br /></p>
                <p class="Free_Form"><br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">Actual details of the job submission process are hidden in the script hitfinder.  Probably no need to to touch the hitfinder script at all unless there are problems with how jobs are submitted to the batch queue (search for lines containing ‘bsub’).</p>
              </div>
            </div>
          </div>
          


          <div style="height: 227px; width: 516px;  height: 227px; left: 12px; position: absolute; top: 582px; width: 516px; z-index: 1; " class="tinyText style_SkipStroke_2">
            <img src="Cheetah_at_LCLS_files/droppedImage.png" alt="" style="border: none; height: 227px; width: 516px; " />
          </div>
          


          <div style="height: 370px; width: 516px;  height: 370px; left: 20px; position: absolute; top: 1044px; width: 516px; z-index: 1; " class="tinyText style_SkipStroke_2">
            <img src="Cheetah_at_LCLS_files/droppedImage_1.png" alt="" style="border: none; height: 370px; width: 516px; " />
          </div>
          


          <div id="id19" style="height: 20px; left: 20px; position: absolute; top: 270px; width: 515px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style_1">New users must first Set up the Slac analysis environment</p>
              </div>
            </div>
          </div>
          


          <div id="id20" style="height: 50px; left: 16px; position: absolute; top: 290px; width: 660px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_660_50" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">Cheetah at SLAC runs inside the SLAC psana analysis framework.<br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">Make sure to follow <a onclick="window.open(this.href); return false;" title="https://confluence.slac.stanford.edu/display/PSDM/Analysis+Setup" href="https://confluence.slac.stanford.edu/display/PSDM/Analysis+Setup" onkeypress="window.open(this.href); return false;">these instructions</a> to set up your analysis environment. It should only be necessary to do this once, and a range of confusing errors will result if this is not done. </p>
              </div>
            </div>
          </div>
          <div style="height: 1550px; line-height: 1550px; " class="spacer"> </div>
        </div>
        <div style="height: 3087px; margin-left: 0px; position: relative; width: 700px; z-index: 15; " id="footer_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id21" style="height: 907px; left: 24px; position: absolute; top: 1720px; width: 651px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_907" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="paragraph_style_2"><span class="style_1">Configuring what Cheetah does is done by editing the cheetah.ini file.  <br /></span></p>
                <p class="paragraph_style_2"><span class="style_1"><br /></span></p>
                <p class="paragraph_style_2"><span class="style_1">There is a sample nanocrystal analysis file in process/lys.ini, and will look for Bragg peaks to find hits. <br /></span></p>
                <p class="paragraph_style_2"><span class="style_1">Open this file and edit it.<br /></span></p>
                <p class="paragraph_style_2"><span class="style_1"><br /></span></p>
                <p class="paragraph_style_2"><span class="style_1">In particular, change the line starting with “darkcal=” to point to the dark calibration file you just created.<br /></span></p>
                <p class="paragraph_style_2"><span class="style_1"><br /></span></p>
                <div class="paragraph paragraph_style_2"><span class="style_1"></span><div style="height: 370px; width: 516px;  height: 370px; position: relative; width: 516px; " class="tinyText style_SkipStroke_2 inline-block"><img src="Cheetah_at_LCLS_files/droppedImage_2.png" alt="" style="border: none; height: 370px; width: 516px; " /></div><span class="tinyText"> </span><span class="style_1"><br /></span></div>
                <p class="paragraph_style_2"><span class="style_1"><br /></span></p>
                <p class="Free_Form"><span class="style_1">Select a run with data and </span>click the “Run Cheetah” button and specify ‘lys.ini’ as the configuration file<br /></p>
                <p class="Free_Form">(it is possible to select more than one run at a time).<br /></p>
                <p class="Free_Form"><span class="style_1"><br /></span></p>
                <div class="paragraph Free_Form"><span class="style_1"></span><div style="height: 206px; width: 483px;  height: 206px; position: relative; width: 483px; " class="tinyText style_SkipStroke_2 inline-block"><img src="Cheetah_at_LCLS_files/droppedImage_3.png" alt="" style="border: none; height: 206px; width: 483px; " /></div><span class="tinyText"> </span><span class="style_1"><br /></span></div>
                <p class="Free_Form"><span class="style_1"><br /></span></p>
                <p class="paragraph_style_2"><span class="style_1">And things should start to happen.  <br /></span></p>
                <p class="paragraph_style_2"><span class="style_1">Once again jobs should appear in the batch queue<br /></span></p>
                <p class="Free_Form">&gt; bjobs -u all -q psfehq<br /></p>
                <p class="Free_Form">690066  barty   RUN   psfehq     psexport02  6*psana1311 r0001      Oct 23 07:3<br /></p>
                <p class="Free_Form">If the crawler is running, the Cheetah status and number of processed frames should update periodically<br /></p>
                <p class="Free_Form">Data should start to appear in the cheetah/hdf5 directory<br /></p>
                <p class="paragraph_style_2"><br /></p>
                <p class="Free_Form">If not, something is wrong and it’s time for debugging.  In particular look at the output of hdf5/run0xxx/bsub.log.<span class="style_1"><br /></span></p>
                <p class="paragraph_style_2"><span class="style_1"><br /></span></p>
                <p class="paragraph_style_2"><span class="style_1">The setup is now done and it’s time for optimisation of the output.<br /></span></p>
              </div>
              <div style="clear: both; height: 0px; line-height: 0px; " class="tinyText"> </div>
            </div>
          </div>
          


          <div id="id22" style="height: 20px; left: 20px; position: absolute; top: 136px; width: 515px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style_1">4. Start the gui</p>
              </div>
            </div>
          </div>
          


          <div style="height: 113px; width: 429px;  height: 113px; left: 12px; position: absolute; top: 183px; width: 429px; z-index: 1; " class="tinyText style_SkipStroke_2">
            <img src="Cheetah_at_LCLS_files/droppedImage_4.png" alt="" style="border: none; height: 114px; width: 429px; " />
          </div>
          


          <div id="id23" style="height: 36px; left: 16px; position: absolute; top: 158px; width: 660px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_660_36" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">Start the GUI interface using the cheetah-gui command as described on the <a title="Cheetah_at_home.html" href="Cheetah_at_home.html">getting started</a> page.<br /></p>
              </div>
            </div>
          </div>
          


          <div style="height: 112px; width: 183px;  height: 112px; left: 484px; position: absolute; top: 184px; width: 183px; z-index: 1; " class="tinyText style_SkipStroke_2">
            <img src="Cheetah_at_LCLS_files/droppedImage_1.jpg" alt="" style="border: none; height: 113px; width: 183px; " />
          </div>
          


          <div style="height: 95px; width: 300px;  height: 95px; left: 381px; position: absolute; top: 314px; width: 300px; z-index: 1; " class="tinyText style_SkipStroke_2">
            <img src="Cheetah_at_LCLS_files/droppedImage_5.png" alt="" style="border: none; height: 95px; width: 300px; " />
          </div>
          


          <div id="id24" style="height: 246px; left: 16px; position: absolute; top: 315px; width: 356px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_356_246" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">Click the IDL virtual machine box to dismiss it.<br /></p>
                <p class="Free_Form">(The Cheetah GUI uses the IDL virtual machine as an environment, which can be <a title="http://www.exelisvis.com/Support/HelpArticlesDetail/TabId/219/ArtMID/900/ArticleID/12395/The-IDL-Virtual-Machine.aspx" href="http://www.exelisvis.com/Support/HelpArticlesDetail/TabId/219/ArtMID/900/ArticleID/12395/The-IDL-Virtual-Machine.aspx">downloaded and used for free</a> if you want to run the image browser at home.)<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">You should then be presented with a list of all previous experiments.  <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">Either select one of the existing experiments, or use ‘Different Directory’ to navigate to the location of the cheetah/gui folder described above and click OK.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">This should bring up the interface shown on the <a title="Cheetah_at_home.html" href="Cheetah_at_home.html">getting started</a> page.<br /></p>
                <p class="Free_Form"><br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">This should be sufficient to view an existing data set set up by someone else. </p>
              </div>
            </div>
          </div>
          


          <div style="height: 263px; width: 300px;  height: 263px; left: 381px; position: absolute; top: 405px; width: 300px; z-index: 1; " class="tinyText style_SkipStroke_2">
            <img src="Cheetah_at_LCLS_files/droppedImage_6.png" alt="" style="border: none; height: 263px; width: 300px; " />
          </div>
          


          <div id="id25" style="height: 20px; left: 20px; position: absolute; top: 712px; width: 515px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style_1">4. enabling command operations and the crawler</p>
              </div>
            </div>
          </div>
          


          <div id="id26" style="height: 64px; left: 16px; position: absolute; top: 731px; width: 660px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_660_64" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Free_Form">Processing of data and updating of the GUI table as an experiment progresses requires the crawler to be started. This little process runs in the background gathering information on the status of XTC files available on disk and the progress of Cheetah jobs.   It can overwrite the current table contents, and only one person should run this at any one time (even though many people can view the GUI at once). </p>
              </div>
            </div>
          </div>
          


          <div style="height: 175px; width: 167px;  height: 175px; left: 340px; position: absolute; top: 789px; width: 167px; z-index: 1; " class="tinyText style_SkipStroke_2">
            <img src="Cheetah_at_LCLS_files/droppedImage_2.jpg" alt="" style="border: none; height: 175px; width: 167px; " />
          </div>
          


          <div style="height: 178px; width: 164px;  height: 178px; left: 521px; position: absolute; top: 788px; width: 164px; z-index: 1; " class="tinyText style_SkipStroke_2">
            <img src="Cheetah_at_LCLS_files/droppedImage_3.jpg" alt="" style="border: none; height: 178px; width: 164px; " />
          </div>
          


          <div id="id27" style="height: 176px; left: 16px; position: absolute; top: 814px; width: 303px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_303_176" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">To start the crawler it is first necessary to go <br /></p>
                <p class="Free_Form">    File-&gt;Unlock command operations<br /></p>
                <p class="Free_Form">then <br /></p>
                <p class="Free_Form">    File-&gt;Start Crawler<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">Unlocking command operations enables the Crawler option and the “Run Cheetah” button.  This step is deliberately added in order to force one to think before overwriting existing data. <br /></p>
                <p class="Free_Form"><br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">A little window with the crawler should appear on screen.  Look in the terminal for any errors. </p>
              </div>
            </div>
          </div>
          


          <div style="height: 85px; width: 295px;  height: 85px; left: 368px; position: absolute; top: 975px; width: 295px; z-index: 1; " class="tinyText style_SkipStroke_2">
            <img src="Cheetah_at_LCLS_files/droppedImage_7.png" alt="" style="border: none; height: 85px; width: 295px; " />
          </div>
          


          <div id="id28" style="height: 20px; left: 20px; position: absolute; top: 1098px; width: 515px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style_1">4. create a dark calibration file</p>
              </div>
            </div>
          </div>
          


          <div id="id29" style="height: 78px; left: 16px; position: absolute; top: 1121px; width: 660px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_660_78" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">The detector needs to be corrected for static offsets, often known as ‘dark frames’.  Make sure to take one at the start of the experiment and every few hours during the experiment. <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">Click the “Run Cheetah” button and specify ‘darkcal.ini’ as the configuration file. <br /></p>
              </div>
            </div>
          </div>
          


          <div style="height: 206px; width: 483px;  height: 206px; left: 36px; position: absolute; top: 1189px; width: 483px; z-index: 1; " class="tinyText style_SkipStroke_2">
            <img src="Cheetah_at_LCLS_files/droppedImage_8.png" alt="" style="border: none; height: 206px; width: 483px; " />
          </div>
          


          <div id="id30" style="height: 218px; left: 16px; position: absolute; top: 1424px; width: 660px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_660_218" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">The job should now be go to the batch queue for processing.<br /></p>
                <p class="Free_Form">Jobs should appear in the batch queue<br /></p>
                <p class="Free_Form">&gt; bjobs -u all -q psfehq<br /></p>
                <p class="Free_Form">690066  barty   RUN   psfehq     psexport02  6*psana1311 r0001      Oct 23 07:3<br /></p>
                <p class="Free_Form">If the crawler is running, the Cheetah status and number of processed frames should update periodically<br /></p>
                <p class="Free_Form">Data should start to appear in the cheetah/hdf5 directory<br /></p>
                <p class="Free_Form">In particular, a file called r00xx-CxiDs1-darkcal.h5 should start to appear.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">If not, something is wrong and it’s time for debugging<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">If all goes well, wait for the job to finish then copy the file r00xx-CxiDs1-darkcal.h5 into the cheetah/calib/darkcal directory. <br /></p>
                <p class="Free_Form"><br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">Once the darkcal is finished running, create a bad pixel map from the darkcal using the Cheetah tools Cheetah-&gt;badpix from darkcal and save it in the cheetah/calib/masks directory. </p>
              </div>
            </div>
          </div>
          


          <div id="id31" style="height: 20px; left: 20px; position: absolute; top: 1692px; width: 515px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style_1">4. Edit your cheetah.ini file</p>
              </div>
            </div>
          </div>
          


          <div id="id32" style="height: 20px; left: 20px; position: absolute; top: 2834px; width: 515px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style_1">4. Time for some analysis (and a cup of tea)</p>
              </div>
            </div>
          </div>
          


          <div id="id33" style="height: 235px; left: 16px; position: absolute; top: 2852px; width: 660px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_660_235" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="paragraph_style_2"><span class="style_1">Setup of the guI should now be done and it’s time to analyse some data.<br /></span></p>
                <p class="Free_Form"><span class="style_1"><br /></span></p>
                <p class="Free_Form"><span class="style_1">A few hints:<br /></span></p>
                <p class="Free_Form"><span class="style_1"><br /></span></p>
                <ol>
                  <li style="line-height: 14px; padding-left: 13px; text-indent: -13px; " class="full-width" value="1">
                    <p style="text-indent: -13px; " class="paragraph_style_3"><span style="font-size: 12px; " class="Bullet">1)</span><span style="width: 3px; " class="inline-block"></span>Review your output.  Often.  Default parameters may work, or they may not.  No analysis should ever be done completely blind.  Use the ‘Show hits” button to look at images and refine the hit finding parameters. <br /></p>
                  </li>
                </ol>
                <p class="Free_Form"><br /></p>
                <ol>
                  <li style="line-height: 14px; padding-left: 13px; text-indent: -13px; " class="full-width" value="2">
                    <p style="text-indent: -13px; " class="paragraph_style_3"><span style="font-size: 12px; " class="Bullet">2)</span><span style="width: 3px; " class="inline-block"></span><span class="style_1">It is convenient to start a new .ini file for each type of sample.  The name of the .ini file is used by the GUI to tag runs and update the table, and ends up as the tag name on the HDF5 directories created.  Separate names helps keep separate samples apart, and makes it easy to copy/tar/grep directories based on sample name or other experiment parameters.  This helps keep data organised and will be of great benefit later on. <br /></span></p>
                  </li>
                </ol>
                <p class="Free_Form"><br /></p>
                <ol>
                  <li style="line-height: 14px; padding-left: 13px; text-indent: -13px; " class="full-width" value="3">
                    <p style="padding-bottom: 0pt; text-indent: -13px; " class="paragraph_style_3"><span style="font-size: 12px; " class="Bullet">3)</span><span style="width: 3px; " class="inline-block"></span>Nothing happening?  Seems like your processing job never starts, and nothing is waiting in the batch queue?  <br />Check the View-&gt;bsub.log file.  This displays the log file from the batch submission process and likely will show some kind of error message.  Common mistakes are an error in typing in the darkcal or mask file names.</p>
                  </li>
                </ol>
              </div>
            </div>
          </div>
          


          <div id="id34" style="height: 20px; left: 20px; position: absolute; top: 2650px; width: 515px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style_1">5. Permissions</p>
              </div>
            </div>
          </div>
          


          <div id="id35" style="height: 176px; left: 16px; position: absolute; top: 2674px; width: 660px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_660_176" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form"><span class="style_1">Working on your own is easy.  Working as a part of a group during an experiment involves setting up directory access permissions so that everyone can see and access the files.<br /></span></p>
                <p class="Free_Form"><span class="style_1"><br /></span></p>
                <p class="Free_Form"><span class="style_1">Here’s a quick set of commands to give everyone in your experiment access to the data:<br /></span></p>
                <p class="Free_Form"><span class="style_1">    &gt; chgrp -R {cxi12345} cheetah<br /></span></p>
                <p class="Free_Form"><span class="style_1">    &gt; chmod -R g+w cheetah<br /></span></p>
                <p class="Free_Form"><span class="style_1">    &gt; chmod -R g+s cheetah<br /></span></p>
                <p style="padding-bottom: 0pt; " class="Free_Form"><span class="style_1">where </span>{cxi12345} should of course be replaced by your experiment name</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>


